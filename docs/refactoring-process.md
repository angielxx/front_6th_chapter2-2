# 리팩토링 프로세스 문서

## 📋 개요

이 문서는 React 쇼핑몰 프로젝트의 리팩토링 과정을 단계별로 기록합니다.
목표는 코드의 가독성, 유지보수성, 확장성을 향상시키고 Clean Code 원칙을 준수하는 것입니다.

## 🎯 리팩토링 목표

- **가독성**: 코드를 쉽게 이해할 수 있도록 개선
- **유지보수성**: 변경과 확장이 용이한 구조로 개선
- **재사용성**: 공통 로직을 분리하여 재사용 가능하게 구성
- **테스트 가능성**: 단위 테스트가 용이한 구조로 개선
- **성능**: 불필요한 렌더링과 연산 최소화

## 📈 진행 상황

### ✅ Phase 1: 개발 환경 설정 (완료)

#### 1.1 Prettier 설정 ✅

- **목적**: 일관된 코드 포맷팅 적용
- **완료 일시**: 2024년 진행
- **작업 내용**:
  - `prettier` 패키지 설치 (v3.6.2)
  - `.prettierrc` 설정 파일 생성
    - 세미콜론 사용 (`semi: true`)
    - 더블쿼트 사용 (`singleQuote: false`)
    - 80자 줄바꿈 (`printWidth: 80`)
    - 2칸 탭 (`tabWidth: 2`)
    - ES5 트레일링 콤마 (`trailingComma: "es5"`)
  - `.prettierignore` 파일 생성
  - `package.json`에 스크립트 추가:
    - `"format": "prettier --write ."`
    - `"format:check": "prettier --check ."`
  - VSCode 자동 포맷팅 설정 (`.vscode/settings.json`)
- **검증**: 전체 프로젝트에 prettier 적용 완료
- **명령어**: `pnpm format`, `pnpm format:check`

#### 1.2 Vite 절대 경로 설정 ✅

- **목적**: 복잡한 상대 경로를 절대 경로로 대체하여 가독성 향상
- **완료 일시**: 2024년 진행
- **작업 내용**:
  - `vite.config.ts`에 alias 설정 추가:
    - `@`: `/src` (기본 src 폴더)
    - `@components`: `/src/components`
    - `@hooks`: `/src/hooks`
    - `@utils`: `/src/utils`
    - `@types`: `/src/types`
    - `@constants`: `/src/constants`
    - `@models`: `/src/models`
  - `tsconfig.app.json`에 path mapping 설정:
    - `baseUrl`: `.`
    - `paths` 객체에 모든 alias 매핑 추가
- **검증**: TypeScript 컴파일 오류 없음 확인 (`npx tsc --noEmit`)
- **사용 예시**:
  ```typescript
  // 기존: import { CartItem } from "../types";
  // 개선: import { CartItem } from "@/types";
  ```

### 🔄 Phase 2: 코드 구조 개선 (예정)

#### 2.1 공통 컴포넌트 분리

- **목적**: UI 컴포넌트 재사용성 향상
- **작업 예정**:
  - [ ] Button, Input 등 기본 UI 컴포넌트 분리
  - [ ] Modal, Toast 등 공통 컴포넌트 분리
  - [ ] 컴포넌트별 Props 인터페이스 정의
  - [ ] Storybook 도입 검토

#### 2.2 비즈니스 로직 분리

- **목적**: 관심사 분리를 통한 코드 구조 개선
- **작업 예정**:
  - [ ] 커스텀 훅으로 상태 로직 분리
  - [ ] 서비스 레이어 도입
  - [ ] 유틸리티 함수 분리
  - [ ] 상수 값 별도 관리

#### 2.3 타입 시스템 강화

- **목적**: 타입 안정성 향상
- **작업 예정**:
  - [ ] 인터페이스 세분화
  - [ ] 유니온 타입 활용
  - [ ] Generic 타입 적용
  - [ ] 타입 가드 함수 구현

#### 2.4 상태 관리 개선

- **목적**: 상태 관리 로직 최적화
- **작업 예정**:
  - [ ] Context API 적용 검토
  - [ ] 상태 정규화
  - [ ] 불필요한 리렌더링 방지
  - [ ] 메모이제이션 적용

### 🧪 Phase 3: 테스트 및 검증 (예정)

#### 3.1 단위 테스트 작성

- **목적**: 코드 품질 보장
- **작업 예정**:
  - [ ] 유틸리티 함수 테스트
  - [ ] 커스텀 훅 테스트
  - [ ] 컴포넌트 테스트
  - [ ] 비즈니스 로직 테스트

#### 3.2 통합 테스트 작성

- **목적**: 전체 시스템 동작 검증
- **작업 예정**:
  - [ ] 사용자 시나리오 테스트
  - [ ] API 통신 테스트
  - [ ] 상태 변화 테스트

### 🚀 Phase 4: 성능 최적화 (예정)

#### 4.1 렌더링 최적화

- **작업 예정**:
  - [ ] React.memo 적용
  - [ ] useMemo, useCallback 최적화
  - [ ] 컴포넌트 분할
  - [ ] 지연 로딩 적용

#### 4.2 번들 최적화

- **작업 예정**:
  - [ ] 코드 스플리팅
  - [ ] Tree shaking 최적화
  - [ ] 이미지 최적화

## 📊 체크리스트

### 개발 환경 설정

- [x] Prettier 설정 및 적용
- [x] Vite 절대 경로 설정
- [ ] ESLint 규칙 정비
- [ ] 허스키(Husky) pre-commit 훅 설정

### 코드 품질

- [ ] 매직 넘버 상수화
- [ ] 중복 코드 제거
- [ ] 함수 단일 책임 원칙 적용
- [ ] 네이밍 컨벤션 통일

### 아키텍처

- [ ] 폴더 구조 개선
- [ ] 계층별 책임 분리
- [ ] 의존성 역전 원칙 적용

### 테스트

- [ ] 단위 테스트 커버리지 80% 이상
- [ ] 통합 테스트 작성
- [ ] E2E 테스트 작성

## 📝 작업 규칙

### 절대 원칙

- 코드의 동작이나 구현이 바뀌면 안되고 반드시 구조 변경(리팩토링)만 진행
- 공통으로 쓰이는 파일만 공통 폴더에 배치
- 비즈니스 로직이 담긴 경우, 관심사끼리 묶어 폴더로 관리
- 모든 테스트 코드가 통과해야 함 (`npx vitest run`)
- 결과 파일은 `main.basic.js`를 기준으로 적용

### Clean Code 원칙

- **DRY**: 중복 코드 제거
- **KISS**: 단순하고 명확한 코드 작성
- **YAGNI**: 불필요한 코드 작성 금지
- **Single Responsibility**: 함수는 20줄 이하, 단일 책임

### 네이밍 규칙

- **예측 가능**: 이름으로 값, 타입, 반환값 예측 가능
- **맥락적**: 설명적 형용사나 명사 추가
- **명확**: 불필요한 단어 제거하되 명확한 의미 유지
- **간결**: 간단하지만 역할과 목적을 명확히 전달
- **일관성**: 동일한 의도에는 동일한 용어 사용

## 🔄 다음 작업

1. **ESLint 설정 정비**: 현재 ESLint 설정 오류 해결
2. **공통 컴포넌트 분리**: UI 컴포넌트 재사용성 향상
3. **커스텀 훅 분리**: 비즈니스 로직과 UI 로직 분리
4. **타입 시스템 강화**: 더 강력한 타입 안정성 확보

---

**마지막 업데이트**: 2024년 (Prettier, 절대 경로 설정 완료)
